<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      >
    <h:head>
        <title>Teste JSF</title>
    </h:head>
    <h:body>
        <p:panel header="Cliente" style="margin-bottom: 20px">
            <h:form id="form">
                <h:panelGrid columns="2" cellpadding="5">
                    <p:outputLabel for="nome" value="Nome"  />
                    <p:inputText id="nome" value="#{clienteMB.cliente.nome}" placeholder="nome"/>
                    <p:outputLabel for="email" value="E-mail"  />
                    <p:inputText id="email" value="#{clienteMB.cliente.email}" placeholder="e-mail"/>

                    <p:outputLabel for="tipo" value="Tipo:" />
                    <p:selectOneRadio id="tipo" unselectable="true" value="#{clienteMB.typePerson}">
                        <f:selectItem itemLabel="PF" itemValue="PF" />
                        <f:selectItem itemLabel="PJ" itemValue="PJ" />
                        <p:ajax event="change" listener="#{clienteMB.typePersonChange()}" update="changeFieldsCpfCnpj" />
                    </p:selectOneRadio>

                    <h:panelGroup id="changeFieldsCpfCnpj" style="display: flex; flex-direction: column; justify-content: flex-start;">
                        <p:outputLabel for="cpf" value="CPF" rendered="${clienteMB.getShowCampoCPF()}" />
                        <p:inputMask id="cpf" value="#{clienteMB.cliente.cpf}" mask="999.999.999-99" rendered="${clienteMB.showCampoCPF}"/>
                        <p:outputLabel for="cnpj" value="CNPJ" rendered="${clienteMB.getShowCampoCNPJ()}" />
                        <p:inputMask id="cnpj" value="#{clienteMB.cliente.cnpj}" mask="99.999.999/9999-99" rendered="${clienteMB.showCampoCNPJ}" />
                        <p:commandButton value="SALVAR" action="#{clienteMB.salvar}" ajax="false" />
                    </h:panelGroup>
                    
                </h:panelGrid>
            </h:form>
        </p:panel>

        <p:dataTable id="tabela" var="cli" value="#{clienteMB.clientes}" rowIndexVar="index" >
            <p:column headerText="ID">
                <h:outputText value="#{cli.id}" />
            </p:column>
            <p:column headerText="Nome">
                <h:outputText value="#{cli.nome}" />
            </p:column>
            <p:column headerText="E-mail">
                <h:outputText value="#{cli.email}" />
            </p:column>
            <p:column headerText="CPF">
                <h:outputText value="#{cli.cpf}" />
            </p:column>
            <p:column headerText="CNPJ">
                <h:outputText value="#{cli.cnpj}" />
            </p:column>
            <p:column headerText="remover">
                <h:form>
                    <p:commandButton style="background-color: red;" value="X" action="#{clienteMB.remover(cli)}" ajax="true" update="tabela"/>
                </h:form>
            </p:column>
            <p:column headerText="editar">
                <h:form>
                    <p:commandButton value="E" action="#{clienteMB.editar(cli)}" ajax="true" update="form" />
                </h:form>
            </p:column>
        </p:dataTable>
    </h:body>
</html>

